<!DOCTYPE html>
<html>

<head>
    <title>
        Hangman!
    </title>
</head>

<body>
    <h1>Hangman!</h1>
    <script>

        function pickWord() {
            // Return a random word
            return words[Math.floor(Math.random() * words.length)]
        };

        function setupAnswerArray(word) {
            // Return the answer array
            var answerArray = [];
            for (var i = 0; i < word.length; i++) {
                answerArray[i] = "_";
            }
            return answerArray;
        };
        function showPlayerProgress(answerArray) {
            // Use alert to show the player their progress
            alert(answerArray.join(" "));
        };
        function getGuess() {
            // Use prompt to get a guess
            return prompt("Guess a letter, or click Cancel to stop playing.");
        };
        function updateGameState(guess, word, answerArray) {
            // Update answerArray and return a number showing how many 
            // times the guess appears in the word so remainingLetters 
            // can be updated
            var rightGuess = 0;
            for (var j = 0; j < word.length; j++) {
                if (word[j] === guess) {
                    answerArray[j] = guess;
                    rightGuess++;
                }
            }
            return rightGuess;
        };
        function showAnswerAndCongratulatePlayer(answerArray) {
            // Use alert to show the answer and congratulate the player
            alert(answerArray.join(" "));
            alert("Good job! The answer was " + word + ".");
        };

        // Create an array of words
        var words = ['monkey'];

        // Pick a random word
        // var word = words[Math.floor(Math.random() * words.length)]
        var word = pickWord();

        // Set up the answer array
        /* var answerArray = [];
        for (var i = 0; i < word.length; i++) {
            answerArray[i] = "_";
        }
        */
        var answerArray = setupAnswerArray(word);

        var remainingLetters = word.length;

        // The game loop
        while (remainingLetters > 0) {
            // Show the player their progress
            // alert(answerArray.join(" "));
            showPlayerProgress(answerArray);

            // Get a guess from the player
            // var guess = prompt("Guess a letter, or click Cancel to stop playing.");
            var guess = getGuess();

            if (guess === null) {
                // Exit the game loop
                break;
            } else if (guess.length !== 1) {
                alert("Please enter a single letter. ");
            } else {
                // Update the game with the guess
                /*for (var j = 0; j < word.length; j++) {
                    if (word[j] === guess) {
                        answerArray[j] = guess;
                        remainingLetters--;
                    }
                }
                */

                var correctGuess = updateGameState(guess, word, answerArray);
                remainingLetters -= correctGuess;
                // remainingLetters = remainingLetters - correctGuess;
            }
        }

        showAnswerAndCongratulatePlayer(answerArray);

        // alert(answerArray.join(" "));
        // alert("Good job! The answer was " + word + ".");
    </script>
</body>

</html>